(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-order"],{"06c5":function(t,e,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=o(i("6b75"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(t){if("string"===typeof t)return(0,n.default)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,n.default)(t,e):void 0}}},"1d42":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 自定义变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.order[data-v-fe49b164]{padding-bottom:%?30?%}.order .search[data-v-fe49b164]{padding:%?25?%;background-color:#efeff4}.order .search .box[data-v-fe49b164]{background-color:#fff;border-radius:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.order .search .box .left[data-v-fe49b164]{width:%?580?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?70?%;padding:%?5?% %?20?%}.order .search .box .left uni-input[data-v-fe49b164]{width:100%}.order .search .box .right[data-v-fe49b164]{height:%?70?%;background:#f55d58;color:#fff;width:%?120?%;border-radius:%?10?%;border-top-left-radius:0;border-bottom-left-radius:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%}.order .search .box uni-text[data-v-fe49b164]{color:#999;margin-right:%?10?%}.order .none_box[data-v-fe49b164]{padding-top:%?60?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.order .none_box uni-image[data-v-fe49b164]{width:%?200?%;height:%?200?%}.order .order-list[data-v-fe49b164]{background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% 0}.order .order-list .list[data-v-fe49b164]{width:25%;text-align:center;border-right:1px solid #ddd;padding:%?6?% %?20?%;font-size:%?28?%}.order .order-list .list[data-v-fe49b164]:nth-last-of-type(1){border-right:none}.order .order-list .list.active[data-v-fe49b164]{color:#f55d58}.order .order-box[data-v-fe49b164]{margin-bottom:%?100?%}.order .order-box .box[data-v-fe49b164]{background-color:#fff;margin-top:%?20?%}.order .order-box .box .order_num[data-v-fe49b164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% %?25?%}.order .order-box .box .order_num .status[data-v-fe49b164]{color:#555}.order .order-box .box .order_num uni-view[data-v-fe49b164]{color:#000}.order .order-box .box .order_num uni-view uni-text[data-v-fe49b164]:nth-of-type(1){color:#666}.order .order-box .box .list[data-v-fe49b164]{padding:%?20?% %?25?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;border-top:1px solid #ddd}.order .order-box .box .list uni-image[data-v-fe49b164]{height:%?170?%;width:%?170?%;margin-right:%?20?%}.order .order-box .box .list .right[data-v-fe49b164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:%?520?%;position:relative}.order .order-box .box .list .right .comments[data-v-fe49b164]{position:absolute;right:0;bottom:0;color:#fff;padding:%?5?% %?15?%;border:1px solid #f55d58;background-color:#f55d58;border-radius:%?10?%}.order .order-box .box .list .right uni-view[data-v-fe49b164]{font-size:%?26?%;color:#333}.order .order-box .box .list .right uni-view.goods_title[data-v-fe49b164]{color:#f55d58;font-size:%?30?%}.order .order-box .box .list .right uni-text[data-v-fe49b164]{font-size:%?26?%;color:#666}.order .order-box .box .list .right uni-text.shop[data-v-fe49b164]{font-size:%?26?%;color:#666}.order .order-box .box .price[data-v-fe49b164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% %?25?%;border-top:1px solid #ddd}.order .order-box .box .price uni-view[data-v-fe49b164]{font-size:%?26?%}.order .order-box .box .price uni-view uni-text[data-v-fe49b164]{font-size:%?26?%;margin-left:%?20?%;color:#333}.order .order-box .box .price uni-view uni-text uni-text[data-v-fe49b164]{margin-left:%?10?%;font-weight:700;color:#f55d58;font-size:%?30?%}.order .order-box .box .btn[data-v-fe49b164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?10?% %?25?% %?20?% %?25?%}.order .order-box .box .btn uni-view[data-v-fe49b164]{border:1px solid #999;margin-left:%?20?%;font-size:%?26?%;padding:%?5?% %?15?%;border-radius:%?10?%;color:#555}.order .order-box .box .btn uni-view.pay[data-v-fe49b164]{color:#fff;padding:%?5?% %?25?%;border:1px solid #f55d58;background-color:#f55d58}.order .confirm[data-v-fe49b164]{position:fixed;bottom:0;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-bottom:%?60?%;background-color:#fff}.order .confirm uni-view.confirm_pay[data-v-fe49b164]{border-top:1px solid #ddd;border-bottom:1px dashed #ddd;width:100%;text-align:center;padding:%?20?% 0;position:relative;background-color:#fff}.order .confirm uni-view.confirm_pay uni-text[data-v-fe49b164]{font-size:%?32?%;color:#666}.order .confirm uni-view.confirm_pay uni-text.iconfont[data-v-fe49b164]{position:absolute;right:%?25?%;font-size:%?40?%}.order .confirm uni-view[data-v-fe49b164]:nth-of-type(2){color:red;font-weight:700;font-size:%?32?%;padding:%?30?%}.order .confirm uni-view[data-v-fe49b164]:nth-of-type(3){color:#fff;background-color:#f55d58;padding:%?20?% %?200?%;border-radius:%?10?%;margin-bottom:%?30?%}',""]),t.exports=e},2909:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=s(i("6005")),o=s(i("db90")),a=s(i("06c5")),r=s(i("3427"));function s(t){return t&&t.__esModule?t:{default:t}}function d(t){return(0,n.default)(t)||(0,o.default)(t)||(0,a.default)(t)||(0,r.default)()}},"2f20":function(t,e,i){"use strict";i.r(e);var n=i("953c"),o=i("3918");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("8e85");var r,s=i("f0c5"),d=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"fe49b164",null,!1,n["a"],r);e["default"]=d.exports},3427:function(t,e,i){"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},3918:function(t,e,i){"use strict";i.r(e);var n=i("e50e"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},6005:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=o(i("6b75"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t))return(0,n.default)(t)}},"69cc":function(t,e,i){var n=i("1d42");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("6fb1a1b8",n,!0,{sourceMap:!1,shadowMode:!1})},"6b75":function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"8e85":function(t,e,i){"use strict";var n=i("69cc"),o=i.n(n);o.a},"953c":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"order"},[n("v-uni-view",{staticClass:"search"},[n("v-uni-view",{staticClass:"box"},[n("v-uni-view",{staticClass:"left"},[n("v-uni-text",{staticClass:"iconfont icon-search1"}),n("v-uni-input",{attrs:{type:"text",placeholder:"请输入搜索内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),n("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}},[t._v("搜索")])],1)],1),n("v-uni-view",{staticClass:"order-list"},[n("v-uni-view",{staticClass:"list",class:{active:1==t.switchIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(1)}}},[t._v("全部")]),n("v-uni-view",{staticClass:"list",class:{active:2==t.switchIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(2)}}},[t._v("待付款")]),n("v-uni-view",{staticClass:"list",class:{active:3==t.switchIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(3)}}},[t._v("待收货")]),n("v-uni-view",{staticClass:"list",class:{active:4==t.switchIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(4)}}},[t._v("待评价")]),n("v-uni-view",{staticClass:"list",class:{active:5==t.switchIndex},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchTab(5)}}},[t._v("已完成")])],1),n("v-uni-view",{staticClass:"order-box"},[t.orderList.length?t._e():n("v-uni-view",{staticClass:"none_box"},[n("v-uni-image",{attrs:{src:i("a82a"),mode:""}})],1),t._l(t.orderList,(function(e){return n("v-uni-view",{key:e.id,staticClass:"box"},[n("v-uni-view",{staticClass:"order_num"},[n("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.navToDetail(e.id,e.out_trade_no)}}},[n("v-uni-text",[t._v("订单号：")]),n("v-uni-text",[t._v(t._s(e.out_trade_no))])],1),n("v-uni-view",{staticClass:"status"},[t._v(t._s(t.orderStatus(e.status)))])],1),t._l(e.products,(function(i){return n("v-uni-view",{key:i.post_id,staticClass:"list_box"},[n("v-uni-view",{staticClass:"list"},[n("v-uni-image",{attrs:{src:i.thumbnail,mode:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.navToDetail(e.id,e.out_trade_no)}}}),n("v-uni-view",{staticClass:"right"},[n("v-uni-view",{staticClass:"goods_title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jump("/pages/detail/goodsDetail?id=",i.post_id)}}},[t._v(t._s(i.post_title))]),n("v-uni-text",[t._v("数量："+t._s(i.num))]),n("v-uni-text",{staticClass:"shop"},[t._v(t._s(i.user_login))]),4==e.status?n("v-uni-view",{staticClass:"comments",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.navToComment(e.id,i.post_id)}}},[t._v("评价宝贝")]):t._e()],1)],1)],1)})),n("v-uni-view",{staticClass:"price"},[n("v-uni-view",[t._v(t._s(e.update_time))]),n("v-uni-view",[n("v-uni-text",[t._v("订单总金额：¥"),n("v-uni-text",[t._v(t._s(e.total>0?e.total:0))])],1)],1)],1),1==e.status?n("v-uni-view",{staticClass:"btn"},[n("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeState(e.id,6)}}},[t._v("取消订单")]),n("v-uni-view",{staticClass:"pay",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.payMoney(e.out_trade_no,e.total)}}},[t._v("立即支付")])],1):t._e(),3==e.status?n("v-uni-view",{staticClass:"btn"},[3===e.status&&1===e.receipt_type?n("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.navToLogistics(e.code,e.logistics)}}},[t._v("查看物流")]):t._e(),n("v-uni-view",{staticClass:"pay",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeState(e.id,4)}}},[t._v("确认收货")])],1):t._e(),6==e.status?n("v-uni-view",{staticClass:"btn"},[n("v-uni-view",[t._v("订单已取消")])],1):t._e()],2)}))],2),t.pay?n("v-uni-view",{staticClass:"confirm"},[n("v-uni-view",{staticClass:"confirm_pay"},[n("v-uni-text",[t._v("确认付款")]),n("v-uni-text",{staticClass:"iconfont icon-chahao",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pay=!1}}})],1),n("v-uni-view",[t._v("¥"+t._s(t.money))]),n("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cirfirmPay.apply(void 0,arguments)}}},[t._v("确认支付")])],1):t._e()],1)},a=[]},a82a:function(t,e,i){t.exports=i.p+"static/img/none.87babb2d.png"},db90:function(t,e,i){"use strict";function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},e50e:function(t,e,i){"use strict";var n=i("4ea4");i("99af"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("2909")),a={data:function(){return{switchIndex:1,pay:!1,orderList:"",status:null,page:1,page_total:null,keyword:"",orderId:null,money:null}},onLoad:function(t){this.switchIndex=Number(t.id)||1,this.switchTab(this.switchIndex)},computed:{},methods:{jump:function(t,e,i){this.$app.jump(t,e,i)},navToDetail:function(t,e){uni.navigateTo({url:"/pages/order/orderDetail?id=".concat(t,"&num=").concat(e)})},navToLogistics:function(t,e){uni.navigateTo({url:"/pages/webview/webview?code=".concat(t,"&logistics=").concat(e)})},navToComment:function(t,e){uni.navigateTo({url:"/pages/goods/submintComment?orderId=".concat(t,"&postId=").concat(e)})},cancel:function(){uni.showModal({title:"取消订单?",content:"您确定取消该订单吗？取消后订单进入失效状态，将不能再支付！",success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},switchTab:function(t){1==t&&(this.switchIndex=1,this.status=0,this.page=1,this.orderList=[],this.getOrderList()),2==t&&(this.switchIndex=2,this.status=1,this.page=1,this.orderList=[],this.getOrderList()),3==t&&(this.switchIndex=3,this.status=3,this.page=1,this.orderList=[],this.getOrderList()),4==t&&(this.switchIndex=4,this.status=4,this.page=1,this.orderList=[],this.getOrderList()),5==t&&(this.switchIndex=5,this.status=5,this.page=1,this.orderList=[],this.getOrderList())},getOrderList:function(){var t=this,e={url:"/api.php/user/profile/order",method:"POST"},i={status:this.status,page:this.page,keyword:this.keyword};this.$api.httpTokenRequest(e,i).then((function(e){1===e.data.code&&(t.orderList=[].concat((0,o.default)(t.orderList),(0,o.default)(e.data.data.posts)),t.page_total=e.data.data.page_total)}),(function(t){console.log(t)}))},changeState:function(t,e){var i=this,n={url:"/api.php/wxapp/user/order_change",method:"POST"},o={id:t,status:e};6===e&&uni.showModal({content:"确认取消此订单？",success:function(t){t.confirm?i.$api.httpTokenRequest(n,o).then((function(t){uni.showToast({title:t.data.msg,icon:"none"}),setTimeout((function(){i.switchTab(2)}),1e3)}),(function(t){console.log(t)})):t.cancel&&console.log("用户点击取消")}}),4===e&&i.$api.httpTokenRequest(n,o).then((function(t){console.log(t.data),uni.showToast({title:"已确认收获！",icon:"none"}),setTimeout((function(){i.switchTab(3)}),1e3)}),(function(t){console.log(t)}))},orderStatus:function(t){var e="";return 1===t&&(e="待付款"),2===t&&(e="待发货"),3===t&&(e="待收货"),4===t&&(e="待评价"),5===t&&(e="已完成"),6===t&&(e="已取消"),e},search:function(){this.orderList=[],console.log(this.keyword),this.getOrderList()},payMoney:function(t,e){this.orderId=t,this.money=e,this.pay=!0},cirfirmPay:function(){var t={url:"/api.php/wxapp/Wxpay/wx_app",method:"POST"},e={out_trade_no:this.orderId,type:4};this.$api.httpTokenRequest(t,e).then((function(t){if(1===t.data.code){var e=t.data.data;uni.requestPayment({provider:"wxpay",orderInfo:JSON.stringify(e),success:function(t){setTimeout((function(){uni.redirectTo({url:"/pages/pay/pay"})}),1e3)},fail:function(t){uni.redirectTo({url:"/pages/order/order"})}})}}),(function(t){console.log(t)}))}},onReachBottom:function(t){this.page<this.page_total?(this.page+=1,this.getOrderList()):uni.showToast({title:"没有更多了哦~",icon:"none"})}};e.default=a}}]);