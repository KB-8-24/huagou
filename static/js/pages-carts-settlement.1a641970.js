(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-carts-settlement"],{"1de5":function(t,e,i){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"664d":function(t,e){t.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Q0Q3RDBBMDI4MkE4RTUxMUI1MzFBRDg5Mzc4NDQ4OTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MERBMUM0REJBOTIyMTFFNTlCNDQ5MTY2RDBBNUFDMTAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MERBMUM0REFBOTIyMTFFNTlCNDQ5MTY2RDBBNUFDMTAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MTdGOEM1Mzg2QThFNTExQjUzMUFEODkzNzg0NDg5OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDRDdEMEEwMjgyQThFNTExQjUzMUFEODkzNzg0NDg5OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVERUaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH//AABEIAAYAggMBEQACEQEDEQH/xAB1AAEBAQEBAAAAAAAAAAAAAAAABQEGCAEBAQEBAAAAAAAAAAAAAAAAAAQFAxAAAQMBBwMFAQAAAAAAAAAAAQARAgNhotITUwQFUXESITGRIjIVEQABAgUEAgMAAAAAAAAAAAAAAQIRYbHREiExAwRBUYEiE//aAAwDAQACEQMRAD8A9Fc0N9MvV8ae3f6xBJ+WBVvXVqbbmf2Ueu+iErLjqxv4VTlKhHjOthlx1Y38KZSoMZ1sMuOrG/hTKVBjOtirw1Pjo1ImdUT3J/EWkAOxIHqpudz4baFnWaxF1X7F97FEaAexAHsQELnv6E4EfWltB7lySe/iCuPJH4NDp/mi+3EDKjrQv4VxNLKVLjKjrQv4UGUqXGVHWhfwoMpUuUeHpcZGtGW5rCVR2p02l4v1JIAXRkPJL2XckINTQ6px0VBjmvYgD2IDHsQH/9k="},"7f8c":function(t,e,i){"use strict";var a=i("f3a4"),n=i.n(a);n.a},c3b0:function(t,e,i){"use strict";i("4de4"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{index:1,noClick:!0,payArr:["支付宝支付","微信支付"],goodsId:null,activity_id:null,goodsData:[],purchaseNum:1,receipt_type:2,pay_type:2,address_id:null,address:"",remark:"",userData:"",ptDetail:"",priceData:""}},onShow:function(){},onLoad:function(t){this.goodsId=Number(t.id),this.activity_id=Number(t.activity_id),this.getGoods(),this.getInfo(),this.getAddress(),this.activity_id&&this.getPtDetail()},methods:{jump:function(t,e,i){this.$app.jump(t,e,i)},bindPickerChange:function(t){this.index=t.target.value,this.pay_type=t.target.value+1},getInfo:function(){var t=this,e={url:"/api.php/wxapp/User/getUserInfo",method:"GET"},i={};this.$api.httpTokenRequest(e,i).then((function(e){t.userData=e.data.data}),(function(t){console.log(t)}))},getGoods:function(){var t=this,e={url:"/api.php/portal/Articles/products",method:"POST"},i={id:this.goodsId};this.$api.httpTokenRequest(e,i).then((function(e){t.goodsData=e.data.data,t.calculate()}),(function(t){console.log(t)}))},increase:function(){this.purchaseNum<this.goodsData.post_stock?this.purchaseNum+=1:uni.showToast({icon:"none",title:"已经是最大库存了哦！"}),this.calculate()},reduce:function(){this.purchaseNum>=2?this.purchaseNum-=1:uni.showToast({icon:"none",title:"不能在少了哦！"}),this.calculate()},calculate:function(){var t=this,e={url:"/api.php/portal/Order/orderTotal",method:"POST"},i={post_id:this.goodsId,num:this.purchaseNum,activity_id:this.activity_id||0};this.$api.httpTokenRequest(e,i).then((function(e){1==e.data.code&&(t.priceData=e.data.data)}),(function(t){console.log(t)}))},getAddress:function(){var t=this,e=this,i={url:"/api.php/user/Profile/address",method:"POST"},a={};this.$api.httpTokenRequest(i,a).then((function(i){i.data.data.posts&&(t.address_id?e.address=i.data.data.posts.filter((function(t){return e.address_id===t.address_id}))[0]:t.address_id=i.data.data.posts[0].address_id)}),(function(t){console.log(t)}))},addressDetail:function(){this.receipt_type=1,this.getAddress()},addAddress:function(t){var e=this;"add"==t?this.$app.jump("/pages/mine/editAddress?type=",t):this.$app.jump("/pages/mine/address?type=",t),uni.$once("addAddress",(function(t){e.address_id=t,e.getAddress()}))},getPtDetail:function(){var t=this,e={url:"/api.php/portal/Articles/join_a_group",method:"POST"},i={activity_id:this.activity_id,id:this.goodsId};this.$api.httpTokenRequest(e,i).then((function(e){t.ptDetail=e.data.data,console.log(t.ptDetail)}),(function(t){console.log(t)}))},saveOrder:function(){var t=this;if(uni.showLoading({title:"加载中..."}),this.noClick){if(this.noClick=!1,this.remark.length>90)return uni.showToast({icon:"none",title:"输入字太多了哦！"}),!1;var e={url:"/api.php/portal/Order/saveOrder",method:"POST"},i={post_id:this.goodsId,num:this.purchaseNum,receipt_type:this.receipt_type,pay_type:this.pay_type,address_id:this.address_id,activity_id:this.activity_id||0,remark:this.remark};console.log(i),setTimeout((function(){t.$api.httpTokenRequest(e,i).then((function(e){if(uni.hideLoading(),999===e.data.code&&(uni.showToast({icon:"none",title:"未登录请先登录！"}),setTimeout((function(){uni.navigateTo({url:"/pages/user/login"})}),1500)),1==e.data.code){var i=e.data.data.order_no;t.payment(i)}}),(function(t){uni.hideLoading(),console.log(t)})),t.noClick=!0}),1e3)}},payment:function(t){var e={url:"/api.php/wxapp/Wxpay/wx_app",method:"POST"},i={order_no:t,type:4};this.$api.httpTokenRequest(e,i).then((function(t){if(1===t.data.code){var e=t.data.data;uni.requestPayment({provider:"wxpay",orderInfo:JSON.stringify(e),success:function(t){console.log(t),setTimeout((function(){uni.redirectTo({url:"/pages/pay/pay"})}),1e3)},fail:function(t){uni.redirectTo({url:"/pages/order/order"})}})}}),(function(t){console.log(t)}))}}};e.default=a},e8f1:function(t,e,i){var a=i("24fb"),n=i("1de5"),s=i("664d");e=a(!1);var o=n(s);e.push([t.i,'@charset "UTF-8";\n/* 自定义变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-68a994bb]{background-color:#fff}.settlement .get_goods[data-v-68a994bb]{padding:%?25?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-bottom:%?20?%}.settlement .get_goods uni-view[data-v-68a994bb]{width:30%;text-align:center;border:1px solid #ddd;padding:%?15?%;font-size:%?30?%}.settlement .get_goods uni-view.active[data-v-68a994bb]{background-color:#f55d58;border:1px solid #f55d58;color:#fff}.settlement .address_box[data-v-68a994bb]{background-image:url('+o+");background-size:20%;padding:%?6?% 0}.settlement .address_box .address[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fefaf5;padding:%?15?% 0}.settlement .address_box .address .info[data-v-68a994bb]{width:%?600?%;padding:0 %?25?%}.settlement .address_box .address .info uni-view[data-v-68a994bb]{color:#666;font-size:%?26?%;width:%?650?%}.settlement .address_box .address uni-text[data-v-68a994bb]{color:#999;font-size:%?50?%;padding:0 %?25?%}.settlement .orderDetail[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:%?25?%}.settlement .orderDetail uni-image[data-v-68a994bb]{width:%?150?%;height:%?150?%;margin-right:%?20?%}.settlement .orderDetail .title_box[data-v-68a994bb]{width:%?500?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.settlement .orderDetail .title_box uni-view[data-v-68a994bb]{color:#666}.settlement .orderDetail .title_box .price[data-v-68a994bb]{color:red}.settlement .purchaseNum[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?25?%}.settlement .purchaseNum uni-view[data-v-68a994bb]{color:#666}.settlement .purchaseNum .operate[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border:1px solid #eee;border-radius:%?10?%;overflow:hidden}.settlement .purchaseNum .operate uni-text[data-v-68a994bb]{color:#fff;background-color:#f55d58;padding:%?8?%}.settlement .purchaseNum .operate uni-view[data-v-68a994bb]{width:%?75?%;text-align:center}.settlement .payment[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?25?%}.settlement .payment uni-view[data-v-68a994bb]{color:#666}.settlement .payment uni-view uni-text[data-v-68a994bb]{color:#666}.settlement .msg_box[data-v-68a994bb]{padding:%?20?% %?25?%}.settlement .msg_box .msg[data-v-68a994bb]{border:1px solid #ddd;padding:%?15?%}.settlement .msg_box .msg uni-textarea[data-v-68a994bb]{width:100%;height:%?150?%;font-size:%?26?%}.settlement .balance[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% %?25?%}.settlement .balance uni-view[data-v-68a994bb]{color:#666;font-size:%?26?%}.settlement .balance uni-view[data-v-68a994bb]:nth-of-type(1){color:red;font-size:%?30?%;margin-right:%?15?%}.settlement .balance uni-view[data-v-68a994bb]:nth-of-type(3){color:#fff;background-color:red;font-size:%?26?%;margin-right:%?15?%;padding:%?10?% %?20?%;border-radius:%?10?%}.settlement .payOrder[data-v-68a994bb]{padding:%?20?% %?25?%}.settlement .payOrder uni-view[data-v-68a994bb]{color:red}.settlement .payOrder uni-view.discount[data-v-68a994bb]{color:#666;font-size:%?26?%;padding:%?10?% 0;margin-bottom:%?10?%;border-bottom:1px solid #ccc}.settlement .payOrder uni-view uni-text[data-v-68a994bb]{font-size:%?36?%;color:#000}.settlement .payOrder uni-view uni-text.discount[data-v-68a994bb]{color:red;font-size:%?26?%;margin-left:%?10?%}.settlement .payOrder uni-view uni-text[data-v-68a994bb]:nth-of-type(2){color:red}.settlement uni-view.btn[data-v-68a994bb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?50?% 0 %?100?% 0}.settlement uni-view.btn uni-view[data-v-68a994bb]{width:%?550?%;padding:%?25?% 0;text-align:center;color:#fff;background-color:#f55d58;border-radius:%?10?%}body.?%PAGE?%[data-v-68a994bb]{background-color:#fff}",""]),t.exports=e},e90d:function(t,e,i){"use strict";i.r(e);var a=i("f636"),n=i("f601");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("7f8c");var o,d=i("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"68a994bb",null,!1,a["a"],o);e["default"]=r.exports},f3a4:function(t,e,i){var a=i("e8f1");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("548e8d61",a,!0,{sourceMap:!1,shadowMode:!1})},f601:function(t,e,i){"use strict";i.r(e);var a=i("c3b0"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},f636:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"settlement"},[i("v-uni-view",{staticClass:"get_goods"},[i("v-uni-view",{class:{active:2==t.receipt_type},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.receipt_type=2}}},[t._v("上门自提")]),i("v-uni-view",{class:{active:1==t.receipt_type},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addressDetail.apply(void 0,arguments)}}},[t._v("物流配送")]),i("v-uni-view",{class:{active:3==t.receipt_type},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getAddress.apply(void 0,arguments)}}},[t._v("同城配送")])],1),i("v-uni-view",{staticClass:"address_box"},[2==t.receipt_type?i("v-uni-view",{staticClass:"address"},[t.goodsData?i("v-uni-view",{staticClass:"info"},[i("v-uni-view",[t._v("店铺名称："+t._s(t.goodsData.user_login))]),i("v-uni-view",[t._v("商家电话："+t._s(t.goodsData.mobile))]),t.goodsData.address?i("v-uni-view",[t._v("所在区域："+t._s(t.goodsData.address.province_name)+"-"+t._s(t.goodsData.address.city_name)+"-"+t._s(t.goodsData.address.district_name))]):t._e(),t.goodsData.address?i("v-uni-view",[t._v("详细地址："+t._s(t.goodsData.address.area||"-"))]):t._e()],1):t._e()],1):t._e(),1==t.receipt_type?i("v-uni-view",{staticClass:"address"},[t.address?i("v-uni-view",{staticClass:"info",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addAddress("choose")}}},[i("v-uni-view",[t._v("姓名："+t._s(t.address.full_name))]),i("v-uni-view",[t._v("电话："+t._s(t.address.tel))]),t.address.address?i("v-uni-view",[t._v("城市："+t._s(t.address.address.province)+"-"+t._s(t.address.address.city)+"-"+t._s(t.address.address.district))]):t._e(),t.address.address?i("v-uni-view",[t._v("地址："+t._s(t.address.address.area))]):t._e()],1):t._e(),t.address?t._e():i("v-uni-view",{staticClass:"info",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addAddress("add")}}},[t._v("还没有地址，点此去添加")]),i("v-uni-text",{staticClass:"iconfont icon-iconfontjiantou2"})],1):t._e()],1),t.goodsData.more?i("v-uni-view",{staticClass:"orderDetail"},[i("v-uni-image",{attrs:{src:t.goodsData.more.thumbnail,mode:""}}),i("v-uni-view",{staticClass:"title_box"},[i("v-uni-view",[t._v(t._s(t.goodsData.post_title))]),t.activity_id?t._e():i("v-uni-view",{staticClass:"price"},[t._v("¥"+t._s(t.goodsData.post_price))]),t.activity_id?i("v-uni-view",{staticClass:"price"},[t._v("团购价：¥"+t._s(t.ptDetail.activity_price))]):t._e()],1)],1):t._e(),i("v-uni-view",{staticClass:"purchaseNum bt"},[i("v-uni-view",[t._v("购买数量：")]),i("v-uni-view",{staticClass:"operate"},[i("v-uni-text",{staticClass:"iconfont icon-jian1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reduce.apply(void 0,arguments)}}}),i("v-uni-view",{model:{value:t.purchaseNum,callback:function(e){t.purchaseNum=e},expression:"purchaseNum"}},[t._v(t._s(t.purchaseNum))]),i("v-uni-text",{staticClass:"iconfont icon-jia",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.increase.apply(void 0,arguments)}}})],1)],1),i("v-uni-picker",{attrs:{value:t.index,range:t.payArr},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"payment bt"},[i("v-uni-view",[t._v("支付方式")]),i("v-uni-view",[i("v-uni-text",[t._v(t._s(t.payArr[t.index]))]),i("v-uni-text",{staticClass:"iconfont icon-iconfontjiantou2"})],1)],1)],1),i("v-uni-view",{staticClass:"msg_box bt"},[i("v-uni-view",{staticClass:"msg"},[i("v-uni-textarea",{attrs:{placeholder:"给商家留言(选填，45字内)"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1),i("v-uni-view",{staticClass:"payOrder bt"},[i("v-uni-view",[t._v("优惠金额：¥"+t._s(Number(t.priceData.discount)+Number(t.priceData.coin_total)))]),i("v-uni-view",{staticClass:"discount"},[t._v("(店铺优惠：¥"+t._s(t.priceData.discount)+"；积分抵扣：¥"+t._s(t.priceData.coin_total)+")")]),i("v-uni-view",[i("v-uni-text",[t._v("合计支付：")]),i("v-uni-text",[t._v("¥"+t._s(t.priceData.total))])],1)],1),i("v-uni-view",{staticClass:"btn"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveOrder.apply(void 0,arguments)}}},[t._v("提交订单")])],1)],1)},s=[]}}]);