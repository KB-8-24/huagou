(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-carts-carts"],{"0dc9":function(t,e,i){t.exports=i.p+"static/img/empty.743de7b2.png"},"2b9c":function(t,e,i){"use strict";i.r(e);var a=i("e7f9"),s=i("6266");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("bdd6");var o,c=i("f0c5"),l=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"29d70038",null,!1,a["a"],o);e["default"]=l.exports},6266:function(t,e,i){"use strict";i.r(e);var a=i("b189"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},b189:function(t,e,i){"use strict";i("4de4"),i("fb6a"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{cartsData:[],total:0,goodsNum:0,isCheckAll:!1,editeFlag:!0,calcColor:!1,calcData:""}},onShow:function(){this.getCarts(),this.totalPrice(),this.isCheckAll=!1,this.calcData="",this.total=0},methods:{jump:function(t,e,i){this.$app.jump(t,e,i)},getCarts:function(){var t=this;this.cartsData=[];var e={url:"/api.php/user/profile/user_favorite",method:"POST"},i={id:"",coupon:null};this.$api.httpTokenRequest(e,i).then((function(e){999===e.data.code&&(uni.showToast({icon:"none",title:"未登录请先登录！"}),setTimeout((function(){uni.navigateTo({url:"/pages/user/login"})}),1500)),1===e.data.code&&(t.cartsData=e.data.data.user_favorite),555===e.data.code&&(t.cartsData=[])}),(function(t){console.log(t)}))},calc:function(){var t=this;this.goodsNum>0&&uni.setStorage({key:"cartsArr",data:this.cartsData,success:function(){t.jump("/pages/carts/settlement2?id=","carts")}})},reduceNum:function(t,e,i){var a=this,s=this.cartsData,n=s[t].posts[e].num;if(n<=1)uni.showToast({title:"不能再少了哦！",icon:"none",duration:1e3});else{n-=1,s[t].posts[e].num=n;var o={url:"/api.php/wxapp/user/favorite",method:"POST"},c={id:i,num:n};this.$api.httpTokenRequest(o,c).then((function(t){a.totalPrice()}),(function(t){console.log(t)}))}},addNum:function(t,e,i){var a=this,s=this.cartsData,n=s[t].posts[e].num;n+=1,s[t].posts[e].num=n;var o={url:"/api.php/wxapp/user/favorite",method:"POST"},c={id:i,num:n};this.$api.httpTokenRequest(o,c).then((function(t){a.totalPrice()}),(function(t){console.log(t)}))},inputChange:function(t,e,i,a){console.log(typeof a.detail.value);var s=Math.floor(Number(a.detail.value));s<1&&(s=1);var n={url:"/api.php/wxapp/user/favorite",method:"POST"},o={id:i,num:s};this.$api.httpTokenRequest(n,o).then((function(t){}),(function(t){console.log(t)})),this.totalPrice()},chooseGoodsSelect:function(t,e){var i=this.cartsData,a=i[t].posts,s=a[e];if(s.is_selected)i[t].posts[e].is_selected=!1,i[t].is_show=!1;else{i[t].posts[e].is_selected=!0;i[t].posts.length;var n=i[t].posts,o=!1;for(var c in n)n[c].is_selected&&o++;o==n.length?i[t].is_show=!0:i[t].is_show=!1}this.checkAllCondition(),this.totalPrice()},chooseShopSelect:function(t,e){var i=this.cartsData;i[e].is_show=!i[e].is_show;for(var a=0;a<i[e].posts.length;a++)i[e].posts[a].is_selected=i[e].is_show;this.checkAllCondition(),this.totalPrice()},checkAllCondition:function(){this.isCheckAll;for(var t=this.cartsData,e=0,i=0;i<t.length;i++)1==t[i].is_show&&e++;e==t.length?this.isCheckAll=!0:this.isCheckAll=!1,this.totalPrice()},chooseCheckAll:function(){var t=this.cartsData,e=this.isCheckAll;this.isCheckAll=!e;for(var i=0;i<t.length;i++){t[i].is_show=this.isCheckAll;for(var a=0;a<t[i].posts.length;a++)t[i].posts[a].is_selected=this.isCheckAll}this.totalPrice()},delete:function(){for(var t=this,e=this,i=this.cartsData,a="",s=0;s<i.length;s++)for(var n=0;n<i[s].posts.length;n++)i[s].posts[n].is_selected&&(a+=i[s].posts[n].id+"??");var o={url:"/api.php/wxapp/user/favorite_del",method:"POST"},c={id:a.slice(0,-2)};e.$api.httpTokenRequest(o,c).then((function(e){1==e.data.code&&(t.getCarts(),uni.showToast({title:"已删除所选商品！",icon:"none"}),t.editeFlag=!0)}),(function(t){console.log(t)})),this.totalPrice()},goodsDelete:function(){var t=this;uni.showModal({title:"温馨提示",content:"确认将这"+this.goodsNum+"个宝贝删除?",cancelText:"我再想想",cancelColor:"#999999",confirmText:"删除",confirmColor:"#fa436a",success:function(e){e.confirm?t.delete():e.cancel}})},totalPrice:function(){this.calcData="";for(var t=this,e=this.cartsData,i=0,a="",s=0;s<e.length;s++)for(var n=0;n<e[s].posts.length;n++)e[s].posts[n].is_selected&&(a+=e[s].posts[n].object_id+"??",i+=e[s].posts[n].num);var o={url:"/api.php/wxapp/user/favorite_total",method:"POST"},c={object_id:a.slice(0,-2)};t.$api.httpTokenRequest(o,c).then((function(e){1==e.data.code&&(t.calcData=e.data.data)}),(function(t){console.log(t)})),this.goodsNum=i,this.cartsData=this.cartsData.filter((function(t){return 0!=t.posts.length}))}}};e.default=a},b668:function(t,e,i){var a=i("e188");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("6b0ab637",a,!0,{sourceMap:!1,shadowMode:!1})},bdd6:function(t,e,i){"use strict";var a=i("b668"),s=i.n(a);s.a},e188:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 自定义变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.carts .top_bar[data-v-29d70038]{height:0;background-color:#f55d58;width:100%}.carts .mt[data-v-29d70038]{padding-bottom:%?50?%}.carts .empty[data-v-29d70038]{height:calc(100vh - %?300?%);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?100?%}.carts .empty uni-image[data-v-29d70038]{width:%?250?%;height:%?200?%;margin-bottom:%?30?%}.carts .empty uni-view[data-v-29d70038]{border:1px solid #ddd;padding:%?20?% %?50?%;border-radius:%?60?%;color:#666}.carts .carts_nav[data-v-29d70038]{background-color:#f55d58;position:fixed;top:0;padding-top:0;width:100%;z-index:100}.carts .carts_nav .layer[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;position:relative}.carts .carts_nav .layer uni-text[data-v-29d70038]{font-size:%?45?%;color:#fff}.carts .carts_nav .layer uni-view[data-v-29d70038]{color:#fff;font-size:%?28?%}.carts .carts_nav .layer uni-view.shopping_car[data-v-29d70038]{font-size:%?35?%}.carts .carts_nav .layer uni-view.gl[data-v-29d70038]{position:absolute;right:0}.carts .carts_list[data-v-29d70038]{background-color:#fff;padding:%?30?%;margin-bottom:%?10?%}.carts .carts_list[data-v-29d70038]:nth-last-of-type(2){margin-bottom:%?120?%}.carts .carts_list .shop_nav[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px dashed #ddd}.carts .carts_list .shop_nav .title[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-bottom:%?15?%}.carts .carts_list .shop_nav .title uni-text[data-v-29d70038]{padding:0 %?10?%;font-size:%?30?%;margin-left:%?10?%;color:#f55d58;font-weight:700}.carts .carts_list .shop_nav .title uni-view[data-v-29d70038]{font-size:%?28?%}.carts .carts_list .shop_nav .shop[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.carts .carts_list .shop_nav .shop uni-view[data-v-29d70038]{color:#666;font-size:%?26?%}.carts .carts_list .shop_nav .shop uni-text[data-v-29d70038]{position:relative;top:%?3?%;color:#666;font-size:%?28?%}.carts .carts_list .info[data-v-29d70038]{padding:%?20?% 0 0 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.carts .carts_list .info uni-image[data-v-29d70038]{width:%?180?%;height:%?180?%;border-radius:%?15?%}.carts .carts_list .info .right[data-v-29d70038]{height:%?180?%;background-color:#fff;width:%?450?%;padding-left:%?15?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.carts .carts_list .info .right .top[data-v-29d70038]{font-size:%?30?%;color:#555;max-height:%?90?%;overflow:hidden}.carts .carts_list .info .right .stock[data-v-29d70038]{color:#999}.carts .carts_list .info .right .bottom[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.carts .carts_list .info .right .bottom .price[data-v-29d70038]{color:#000;font-weight:700;font-size:%?36?%}.carts .carts_list .info .right .bottom .price uni-text[data-v-29d70038]{font-size:%?28?%;margin-right:%?6?%}.carts .carts_list .info .right .bottom .operate[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.carts .carts_list .info .right .bottom .operate uni-text[data-v-29d70038]{font-size:%?30?%;color:#999}.carts .carts_list .info .right .bottom .operate uni-view[data-v-29d70038]{background-color:#f4f4f4;margin:0 %?10?%;border-radius:%?5?%;font-size:%?32?%;color:#666}.carts .carts_list .info .right .bottom .operate uni-view uni-input[data-v-29d70038]{height:%?50?%;width:%?60?%;font-size:%?25?%;text-align:center}.carts .calculation[data-v-29d70038]{border-top:1px solid #ddd;position:fixed;background-color:#fff;bottom:%?98?%;width:100%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?20?%;z-index:600}.carts .calculation.delete .del_btn[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#000}.carts .calculation.delete .del_btn uni-text[data-v-29d70038]{color:#000;margin-right:%?25?%}.carts .calculation.delete .del_btn .del[data-v-29d70038]{border:1px solid #ddd;padding:%?15?% %?50?%;border-radius:%?60?%}.carts .calculation .discount[data-v-29d70038]{width:%?750?%;height:%?60?%;position:absolute;top:%?-60?%;left:%?0?%;background-color:#eee;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #ddd;z-index:100}.carts .calculation .discount uni-text[data-v-29d70038]{padding:0 %?15?%;color:#666;font-size:%?26?%}.carts .calculation .discount uni-text[data-v-29d70038]:nth-of-type(2){color:red}.carts .calculation .radio[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.carts .calculation .radio .group[data-v-29d70038]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:%?20?%}.carts .calculation .radio .group .choose_all[data-v-29d70038]{color:#333;margin-left:%?10?%}.carts .calculation .radio uni-view[data-v-29d70038]{font-size:%?28?%}.carts .calculation .radio uni-view uni-text[data-v-29d70038]{color:#666}.carts .calculation .radio uni-view uni-text.total_price[data-v-29d70038]{color:#000;font-weight:700;font-size:%?35?%}.carts .calculation .compute[data-v-29d70038]{background-color:#999;color:#fff;padding:%?20?% %?60?%;border-radius:%?50?%}.carts .calculation .compute.calcColor[data-v-29d70038]{background-color:#f55d58}',""]),t.exports=e},e7f9:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"carts"},[a("v-uni-view",{staticClass:"carts_nav"},[a("v-uni-view",{staticClass:"layer"},[a("v-uni-view",{staticClass:"shopping_car"},[t._v("购物车")]),a("v-uni-view",{staticClass:"gl",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editeFlag=!t.editeFlag}}},[t._v(t._s(t.editeFlag?"编辑":"完成"))])],1)],1),0!==t.cartsData.length?a("v-uni-view",{staticClass:"mt"},[t._l(t.cartsData,(function(e,i){return a("v-uni-view",{key:i,staticClass:"carts_list"},[a("v-uni-checkbox-group",[a("v-uni-view",{staticClass:"shop_nav"},[a("v-uni-view",{staticClass:"title",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseShopSelect(e,i)}}},[a("v-uni-radio",{staticClass:"sx8",attrs:{value:"ac",checked:0!=e.is_show}}),a("v-uni-text",[t._v(t._s(e.user_login))])],1),a("v-uni-view",{staticClass:"shop",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jump("/pages/home/shopCenter?id=",e.shop_id)}}},[a("v-uni-view",[t._v("进入店铺")]),a("v-uni-text",{staticClass:"iconfont icon-left"})],1)],1)],1),t._l(e.posts,(function(e,s){return a("v-uni-view",{key:s,staticClass:"info"},[a("v-uni-checkbox-group",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseGoodsSelect(i,s)}}},[a("v-uni-radio",{staticClass:"sx8",attrs:{checked:0!=e.is_selected,value:"ss"}})],1),a("v-uni-image",{attrs:{src:e.more.thumbnail,mode:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jump("/pages/detail/goodsDetail?id=",e.object_id)}}}),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"top",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jump("/pages/detail/goodsDetail?id=",e.object_id)}}},[t._v(t._s(e.post_title))]),a("v-uni-view",{staticClass:"stock"},[t._v("库存："+t._s(e.post_stock))]),a("v-uni-view",{staticClass:"bottom"},[a("v-uni-view",{staticClass:"price"},[a("v-uni-text",[t._v("￥")]),t._v(t._s(e.post_price))],1),a("v-uni-view",{staticClass:"operate"},[a("v-uni-text",{staticClass:"iconfont icon-jian1",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.reduceNum(i,s,e.id)}}}),a("v-uni-view",[a("v-uni-input",{attrs:{type:"number"},on:{blur:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange(i,s,e.id,a)}},model:{value:e.num,callback:function(i){t.$set(e,"num",i)},expression:"gItem.num"}})],1),a("v-uni-text",{staticClass:"iconfont icon-jia",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addNum(i,s,e.id)}}})],1)],1)],1)],1)}))],2)})),t.editeFlag?a("v-uni-view",{staticClass:"calculation"},[t.calcData.discounted>0||t.calcData.coin_total>0?a("v-uni-view",{staticClass:"discount"},[a("v-uni-text",[t._v("原价:"+t._s(t.calcData.old_total)+"元")]),a("v-uni-text",[t._v("(店铺优惠:"+t._s(t.calcData.discounted)+"；积分抵扣:¥"+t._s(t.calcData.coin_total)+")")])],1):t._e(),a("v-uni-view",{staticClass:"radio"},[a("v-uni-checkbox-group",{staticClass:"group",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCheckAll.apply(void 0,arguments)}}},[a("v-uni-radio",{staticClass:"sx8",attrs:{value:"ac",checked:t.isCheckAll}}),a("v-uni-text",{staticClass:"choose_all"},[t._v("全选")])],1),a("v-uni-view",[a("v-uni-text",[t._v("实付款:")]),a("v-uni-text",{staticClass:"total_price"},[t._v("￥"+t._s(t.calcData.total||0))])],1)],1),a("v-uni-view",{staticClass:"compute",class:{calcColor:t.goodsNum>0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.calc.apply(void 0,arguments)}}},[t._v("去结算")])],1):t._e(),t.editeFlag?t._e():a("v-uni-view",{staticClass:"calculation delete"},[a("v-uni-view",{staticClass:"radio"},[a("v-uni-checkbox-group",{staticClass:"group",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCheckAll.apply(void 0,arguments)}}},[a("v-uni-radio",{staticClass:"sx8",attrs:{value:"ac",checked:t.isCheckAll}}),a("v-uni-text",{staticClass:"choose_all"},[t._v("全选")])],1)],1),a("v-uni-view",{staticClass:"del_btn"},[a("v-uni-text",{model:{value:t.goodsNum,callback:function(e){t.goodsNum=e},expression:"goodsNum"}},[t._v("已选"+t._s(t.goodsNum)+"件")]),a("v-uni-view",{staticClass:"del",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goodsDelete.apply(void 0,arguments)}}},[t._v("删除")])],1)],1)],2):t._e(),0==t.cartsData.length?a("v-uni-view",{staticClass:"empty"},[a("v-uni-image",{attrs:{src:i("0dc9"),mode:""}}),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jump("/pages/home/home","","a")}}},[t._v("去逛逛")])],1):t._e()],1)},n=[]}}]);